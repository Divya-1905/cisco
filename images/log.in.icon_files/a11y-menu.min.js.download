/*
 * DM Accessibility : Menu Link Items v1.0  * DM Accessibility : Menu v1.2  * DM Accessibility : Menu Controller v1.1 */
var A11YMenuLinks=function(a,b){this.domNode=a;this.menu=b;this.keyCode=Object.freeze({TAB:9,RETURN:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40})};
A11YMenuLinks.prototype.menuLinkKeydown=function(a){var b=!1;switch(a.keyCode){case this.keyCode.ESC:this.menu.setFocusToController();this.menu.close(!0);b=!0;break;case this.keyCode.UP:this.menu.setFocusToPreviousItem(this);b=!0;break;case this.keyCode.DOWN:this.menu.setFocusToNextItem(this);b=!0;break;case this.keyCode.TAB:this.menu.setFocusToController(),this.menu.close(!0)}b&&(a.stopPropagation(),a.preventDefault())};
A11YMenuLinks.prototype.menuLinkClick=function(a){this.menu.setFocusToController();this.menu.close(!0)};A11YMenuLinks.prototype.init=function(){this.domNode.tabIndex=-1;this.domNode.getAttribute("role")||this.domNode.setAttribute("role","menuitem");this.domNode.addEventListener("keydown",this.menuLinkKeydown.bind(this));this.domNode.addEventListener("click",this.menuLinkClick.bind(this))};
var A11YMenu=function(a,b,c){this.domNode=a;this.controller=b;this.selector=c;this.menuitems=[];this.lastItem=this.firstItem=null;this.config={open:!1,heightChecked:!1,initHeight:0}};A11YMenu.prototype.setFocusToController=function(){this.controller.domNode.focus()};A11YMenu.prototype.setFocusToFirstItem=function(){this.firstItem.domNode.focus()};A11YMenu.prototype.setFocusToLastItem=function(){this.lastItem.domNode.focus()};
A11YMenu.prototype.setFocusToPreviousItem=function(a){a===this.firstItem?this.lastItem.domNode.focus():(a=this.menuitems.indexOf(a),this.menuitems[a-1].domNode.focus())};A11YMenu.prototype.setFocusToNextItem=function(a){a===this.lastItem?this.firstItem.domNode.focus():(a=this.menuitems.indexOf(a),this.menuitems[a+1].domNode.focus())};
A11YMenu.prototype.slideToggle=function(){this.config.heightChecked||(this.config.initHeight=this.domNode.offsetHeight,this.config.heightChecked=!0);this.config.open?(this.config.open=!1,this.domNode.style.display="none"):(this.config.open=!0,this.domNode.style.display="block")};A11YMenu.prototype.toggleClass=function(a){document.querySelector(this.selector).classList.toggle(a)};
A11YMenu.prototype.open=function(){this.slideToggle();this.toggleClass("open");this.controller.domNode.setAttribute("aria-expanded","true")};A11YMenu.prototype.close=function(a){if(void 0===a||a)this.slideToggle(),this.toggleClass("open"),this.controller.domNode.removeAttribute("aria-expanded")};
A11YMenu.prototype.init=function(){this.domNode.tabIndex=-1;this.domNode.setAttribute("role","menu");if(!this.domNode.getAttribute("aria-labelledby")&&!this.domNode.getAttribute("aria-label")&&!this.domNode.getAttribute("title")){var a=this.controller.domNode.textContent;this.domNode.setAttribute("aria-label",a)}a=this.domNode.querySelectorAll("a:not([data-a11y-unfocus])");for(var b=0;b<a.length;b++){var c=new A11YMenuLinks(a[b],this);c.init();this.menuitems.push(c)}a=this.menuitems.length;0<a&&(this.firstItem=
this.menuitems[0],this.lastItem=this.menuitems[a-1])};var A11YMenuController=function(a,b,c){this.domNode=a;this.menu=!1;this.selector=b;this.clsbtnSelector=void 0===c?null:c;this.menuDomNode=document.getElementById(this.domNode.getAttribute("aria-controls"));this.menuInit=!1;this.keyCode=Object.freeze({RETURN:13,SPACE:32,UP:38,DOWN:40})};
A11YMenuController.prototype.menuBtnKeydown=function(a){var b=!1;this.menuDomNode&&!this.menuInit&&(this.menuInit=!0,this.menu=new A11YMenu(this.menuDomNode,this,this.selector),this.menu.init());switch(a.keyCode){case this.keyCode.SPACE:case this.keyCode.RETURN:case this.keyCode.DOWN:this.menu&&(this.menu.open(),this.menu.setFocusToFirstItem());b=!0;break;case this.keyCode.UP:this.menu&&(this.menu.open(),this.menu.setFocusToLastItem(),b=!0)}b&&(a.stopPropagation(),a.preventDefault())};
A11YMenuController.prototype.menuBtnClick=function(a){"true"==this.domNode.getAttribute("aria-expanded")?(this.menu.close(!0),this.menu.setFocusToController()):(this.menuDomNode&&!this.menuInit&&(this.menuInit=!0,this.menu=new A11YMenu(this.menuDomNode,this,this.selector),this.menu.init()),this.menu.open(),this.menu.setFocusToFirstItem())};
A11YMenuController.prototype.init=function(){this.domNode.setAttribute("aria-haspopup","true");this.domNode.addEventListener("keydown",this.menuBtnKeydown.bind(this));this.domNode.addEventListener("click",this.menuBtnClick.bind(this));this.clsbtnSelector&&document.querySelector(this.clsbtnSelector).addEventListener("click",this.menuBtnClick.bind(this))};